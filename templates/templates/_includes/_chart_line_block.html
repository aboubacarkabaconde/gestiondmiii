{% comment %} _includes/_chart_line_block.html {% endcomment %}
{# Requires: canvas_id, json_labels_id, json_data_id, dataset_label, stroke, fill #}
<div class="mt-3" style="position:relative;height:340px">
  <canvas id="{{ canvas_id }}"></canvas>
</div>
<script>
(function(){
  const L = JSON.parse(document.getElementById('{{ json_labels_id }}').textContent || '[]');
  const D = JSON.parse(document.getElementById('{{ json_data_id }}').textContent   || '[]');
  const ctx = document.getElementById('{{ canvas_id }}');
  if(!ctx) return;
  new Chart(ctx, {
    type:'line',
    data:{ labels:L, datasets:[{ label:'{{ dataset_label|escapejs }}', data:D, tension:.35, fill:true,
      borderColor:'{{ stroke }}', backgroundColor:'{{ fill }}' }]},
    options:{ responsive:true, maintainAspectRatio:false, scales:{ y:{ beginAtZero:true } },
      plugins:{ legend:{ position:'bottom' } } }
  });
})();
</script>
