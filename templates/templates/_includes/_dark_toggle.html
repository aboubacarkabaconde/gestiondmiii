{% comment %} _includes/_dark_toggle.html {% endcomment %}
<div class="form-check form-switch text-light ms-3">
  <input class="form-check-input" type="checkbox" id="themeSwitch">
  <label class="form-check-label small" for="themeSwitch">Sombre</label>
</div>
<script>
(function(){
  const key='gdm_theme';
  const el=document.getElementById('themeSwitch');
  const apply=(mode)=>{ document.documentElement.setAttribute('data-theme', mode); if(el) el.checked = (mode==='dark'); };
  const saved=localStorage.getItem(key)||'light'; apply(saved);
  el && el.addEventListener('change', function(){
    const m=this.checked?'dark':'light'; localStorage.setItem(key,m); apply(m);
  });
})();
</script>
