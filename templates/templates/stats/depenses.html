{% extends "base.html" %}
{% block title %}Statistiques Dépenses - Gestion D.M.I{% endblock %}
{% block content %}
<div class="container-fluid">
  <h4 class="section-title">Statistiques — Dépenses</h4>
  <form method="get" class="row g-2 mb-3">
    <div class="col-6 col-md-3"><input name="start" value="{{ filtre.start|date:'Y-m-d' }}" type="date" class="form-control"></div>
    <div class="col-6 col-md-3"><input name="end"   value="{{ filtre.end|date:'Y-m-d' }}"   type="date" class="form-control"></div>
    <div class="col-6 col-md-3"><input name="site_id" value="{{ filtre.site_id }}" class="form-control" placeholder="Site ID"></div>
    <div class="col-12 col-md-2"><button class="btn btn-primary w-100">Filtrer</button></div>
  </form>
  {{ labels|json_script:"dep-labels" }} {{ serie_depenses|json_script:"dep-serie" }}
  {% include '_includes/_chartjs_cdn.html' %}
  <div class="card dashboard-card"><div class="card-body">
    {% include '_includes/_chart_line_block.html' with canvas_id='chartDep' json_labels_id='dep-labels' json_data_id='dep-serie' dataset_label='Dépenses (FG)' stroke='rgba(13,110,253,1)' fill='rgba(13,110,253,.2)' %}
    <p class="mt-3 mb-0">Total : <span class="fw-bold text-danger">{{ total_depenses }}</span></p>
  </div></div>
</div>
{% endblock %}
